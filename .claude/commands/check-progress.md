---
description: Check current checkpoint progress
allowed-tools: Read, Glob
---

# Progress Checker

現在のチェックポイントの進捗状況を確認するコマンド。

## Usage

```
/check-progress
```

または、ユーザーが以下のような指示をした場合：
- 「進捗を確認」
- 「現在地は？」
- 「どこまで完了した？」

## Workflow

1. `.claude/plan/task/` から `XX_progress.md` を検索
2. 最新の進捗ファイルを読み込み
3. 現在地、次のタスク、完了状況を報告
4. 次のチェックポイントの詳細を表示

## Output Format

```
📊 プロジェクト進捗状況

**計画書:** `.claude/plan/task/[MAJOR]_plan_xxx/`

---

## 現在地

| 項目 | 状態 |
|------|------|
| **現在地** | Phase X: チェックポイント X-Y |
| **次のタスク** | チェックポイント X-(Y+1): [タスク名] |
| **詳細ドキュメント** | `0X_phaseX_xxx.md` |

---

## 進捗状況

**Phase X: Y/Z チェックポイント完了 (XX%)**

| チェックポイント | 状態 |
|----------------|------|
| CP X-1: [タスク名] | ✅ 完了 |
| CP X-2: [タスク名] | ✅ 完了 |
| CP X-3: [タスク名] | ⏳ 進行中 |
| CP X-4: [タスク名] | ⬜ 未着手 |

---

## 最新コミット

**コミット:** `hash` - CP X-Y: [内容]

---

## フェーズ全体の進捗

- **Phase 1: [名前]** - ✅ 完了 (3/3チェックポイント)
- **Phase 2: [名前]** - ⏳ 進行中 (2/5チェックポイント)
- **Phase 3: [名前]** - ⬜ 未着手 (0/2チェックポイント)

**全体進捗:** 5/10チェックポイント完了 (50%)

---

## 次のステップ

**チェックポイント X-(Y+1): [タスク名]（推定時間）**

詳細: `.claude/plan/task/[MAJOR]_plan_xxx/0X_phaseX_xxx.md`

続行する場合は「次のチェックポイント」または「CP X-(Y+1)」と指示してください。
```

## Example

### ユーザー入力

```
/check-progress
```

または

```
進捗を確認
```

### 出力

```
📊 プロジェクト進捗状況

**計画書:** `.claude/plan/task/[MAJOR]_plan_ダークモード切り替え/`

---

## 現在地

| 項目 | 状態 |
|------|------|
| **現在地** | Phase 2: チェックポイント 2-2 |
| **次のタスク** | チェックポイント 2-3: 全ウィジェットへのテーマ適用 |
| **詳細ドキュメント** | `02_phase2_ui実装.md` |

---

## 進捗状況

**Phase 2: 2/3 チェックポイント完了 (67%)**

| チェックポイント | 状態 |
|----------------|------|
| CP 2-1: メニューアイテムの追加 | ✅ 完了 |
| CP 2-2: 切り替えアクションの実装 | ✅ 完了 |
| CP 2-3: 全ウィジェットへのテーマ適用 | ⬜ 未着手 |

---

## 最新コミット

**コミット:** `abc1234` - CP 2-2: 切り替えアクションの実装

---

## フェーズ全体の進捗

- **Phase 1: コア層実装** - ✅ 完了 (2/2チェックポイント)
- **Phase 2: UI層実装** - ⏳ 進行中 (2/3チェックポイント)
- **Phase 3: 統合テスト** - ⬜ 未着手 (0/1チェックポイント)

**全体進捗:** 4/6チェックポイント完了 (67%)

---

## 次のステップ

**チェックポイント 2-3: 全ウィジェットへのテーマ適用（1-2時間）**

詳細: `.claude/plan/task/[MAJOR]_plan_ダークモード切り替え/02_phase2_ui実装.md`

続行する場合は「次のチェックポイント」または「CP 2-3」と指示してください。
```

## Implementation Notes

### 進捗ファイルの検索

複数の計画書が存在する可能性があるため、最新の進捗ファイルを判定：

1. `.claude/plan/task/` 配下の全 `XX_progress.md` を検索
2. ファイルの更新日時を確認
3. 最新のファイルを読み込み

### 複数の計画書が存在する場合

```
⚠️ 複数の計画書が見つかりました

1. `.claude/plan/task/[MAJOR]_plan_ダークモード/` (最終更新: 2025-01-09)
2. `.claude/plan/task/[MAJOR]_plan_検索機能/` (最終更新: 2025-01-08)

どの計画書の進捗を確認しますか？
```

AskUserQuestionツールを使用してユーザーに選択してもらいます。

### 進捗ファイルが見つからない場合

```
❌ 進捗ファイルが見つかりませんでした

`.claude/plan/task/` に `XX_progress.md` が存在しません。

チェックポイントベースの計画書を作成する場合は、`/checkpoint-plan` を使用してください。
```

### 進捗ファイルの解析

`XX_progress.md` から以下の情報を抽出：

- 現在地（Phase X: CP X-Y）
- 次のタスク（CP X-(Y+1): [タスク名]）
- Gitチェックポイント（コミットハッシュと状態）
- 完了フェーズ（✅/⏳/⬜）
- メモ・注意事項

### パーセンテージ計算

各フェーズとチェックポイントの完了率を計算：

```
Phase X: 完了チェックポイント数 / 総チェックポイント数 × 100
全体: 全完了チェックポイント数 / 全チェックポイント数 × 100
```

## Notes

- このコマンドは読み取り専用で、進捗ファイルを変更しません
- 進捗ファイルの更新は、チェックポイント実行時に自動で行われます
- 計画書の詳細を確認したい場合は、出力された詳細ドキュメントのパスを使用してください
