# チェックポイントベース計画書テンプレート

このフォルダは、チェックポイントベースの実装計画を作成するためのテンプレートです。

## テンプレートファイル

| ファイル | 説明 |
|---------|------|
| `00_overview.md` | 全体概要・フェーズ一覧・依存関係・成功基準 |
| `01_phase1_example.md` | Phase詳細・チェックポイント定義のサンプル |
| `XX_progress.md` | 進捗トラッカー（必須） |
| `XX_testing.md` | 統合テスト計画（オプション） |

## 使い方

### 1. スキルを使用する場合（推奨）

```bash
/checkpoint-plan [機能名]
```

スキルが自動的に以下を実行します：
- 機能要件のヒアリング
- タスク規模の判定
- フェーズとチェックポイントの分割
- 計画書フォルダの作成

### 2. 手動で作成する場合

#### ステップ1: フォルダを作成

```bash
cd .claude/plan/task/
cp -r "[EXAMPLE]_template" "[MAJOR]_plan_機能名"
```

#### ステップ2: ファイルを編集

1. `00_overview.md` を開き、全体計画を記述
2. `01_phase1_xxx.md` を編集（必要に応じて `02_phase2_xxx.md`, `03_phase3_xxx.md` を追加）
3. `XX_progress.md` を初期化（現在地を Phase 1: CP 1-1 に設定）
4. `XX_testing.md` をテスト計画に合わせて編集（オプション）

#### ステップ3: ユーザー承認を待つ

計画書の内容をユーザーに提示し、承認を得てから実装を開始します。

## ファイル命名規則

### フォルダ名

```
[MAJOR]_plan_[機能名]/
```

- `[MAJOR]`: 大規模タスクであることを示すプレフィックス
- `plan_`: 計画書であることを示す
- `[機能名]`: 実装する機能の名前（日本語可）

例：
- `[MAJOR]_plan_ダークモード切り替え/`
- `[MAJOR]_plan_検索機能拡張/`
- `[MAJOR]_plan_パフォーマンス最適化/`

### フェーズファイル

```
0X_phaseX_[フェーズ名].md
```

- `0X`: Phase番号（01, 02, 03, ...）
- `phaseX`: Phase識別子
- `[フェーズ名]`: フェーズの内容を表す名前

例：
- `01_phase1_コア層実装.md`
- `02_phase2_UI層実装.md`
- `03_phase3_統合テスト.md`

### 固定ファイル

- `00_overview.md`: 全体概要（常にこの名前）
- `XX_progress.md`: 進捗トラッカー（常にこの名前）
- `XX_testing.md`: 統合テスト計画（常にこの名前）

## チェックポイント実行の流れ

### 1. 最初のチェックポイント開始

```
次のチェックポイント
```

または

```
CP 1-1 を実行
```

### 2. Claude Codeの動作

1. `XX_progress.md` を読み込み、現在地を確認
2. 該当チェックポイントの詳細（`01_phase1_xxx.md`）を読み込み
3. タスクを実行
4. 検証（`python3 main.py` で動作確認）
5. Gitコミット（メッセージに "CP X-Y:" を含める）
6. `XX_progress.md` を更新
7. ユーザーに報告

### 3. 次のチェックポイントへ

Claude Codeからの報告を確認後、以下のいずれかで続行：

```
続けて
```

```
次のチェックポイント
```

```
CP 1-2 を実行
```

### 4. 進捗確認

```
進捗を確認
```

または

```
/check-progress
```

## ベストプラクティス

### チェックポイント分割

- 1チェックポイント = 1-2時間（標準粒度）
- 各チェックポイントで検証可能な単位
- 論理的に独立した機能単位

### ファイルパスの明記

各チェックポイントで変更するファイルを具体的に記載：

```markdown
- [ ] サブタスク1
  - 変更ファイル: `src/core/settings_manager.py`
  - 実装内容: dark_mode設定の読み書きメソッド
```

### 検証手順の具体化

検証コマンドと期待結果を明確に：

```markdown
**検証:**
```bash
python3 main.py
```

手動確認:
1. アプリを起動
2. メニューから「ダークモード切り替え」を選択
3. テーマがダークモードに切り替わることを確認
```

### 完了条件の明確化

何をもって完了とするかを明記：

```markdown
**完了条件:**
- 機能Xが動作する
- テストYが成功する
- 既存機能Zに影響がない
```

## トラブルシューティング

### 問題1: チェックポイントが大きすぎる

**症状**: 1つのチェックポイントに3時間以上かかる

**対処**:
1. フェーズファイルを編集してチェックポイントを細分化
2. `XX_progress.md` を更新して新しい構造を反映
3. ユーザーに変更を報告

### 問題2: 計画と実装が乖離

**症状**: 実装を進めるうちに、当初の計画が現実的でないことが判明

**対処**:
1. 現在の進捗を `XX_progress.md` に記録
2. 計画の見直しが必要な理由をメモに記載
3. ユーザーに報告し、計画の修正を提案
4. ユーザー承認後、計画ファイルを更新

## 参考資料

- `.claude/rules/checkpoint-workflow.md` - チェックポイントワークフローの詳細
- `.claude/rules/plan-management.md` - 計画書管理ルール
- `CLAUDE.md` - プロジェクト全体のルール
