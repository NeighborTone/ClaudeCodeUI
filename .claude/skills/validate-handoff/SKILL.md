---
name: validate-handoff
description: Validate plan documents are self-contained for context-clear handoff
allowed-tools: Read, Glob, Grep
---

# Handoff Validation Skill

計画書がコンテキストクリア後も作業を引き継げる状態かを検証します。

## Usage

```
/validate-handoff [plan_folder_path]
```

パスを省略した場合、`.claude/plan/task/` 内の進行中タスクを自動検出。

## Validation Workflow

### 1. 進捗ファイル検証

`.claude/plan/task/` 内の `XX_progress.md` を検索し、以下を確認：

- [ ] XX_progress.md が存在するか
- [ ] 「現在地」が明記されているか（Phase X: チェックポイント X-Y）
- [ ] 「次のタスク」が明記されているか
- [ ] Gitコミットハッシュが記録されているか
- [ ] 詳細ドキュメントへの参照があるか

### 2. 計画書検証

各フェーズファイルを確認：

- [ ] 各フェーズファイル（01_phase1.md など）が存在するか
- [ ] チェックポイントに「タスク」セクションがあるか
- [ ] チェックポイントに「検証」セクションがあるか
- [ ] チェックポイントに「完了条件」があるか
- [ ] ファイルパスが具体的に記載されているか（フルパス）
- [ ] 実装詳細（コード例または手順）が含まれているか

### 3. クリティカルパス検証（複数ファイル・フォルダにまたがる場合）

- [ ] 00_overview.md にクリティカルパスが明記されているか
- [ ] 依存関係図または依存関係表が存在するか
- [ ] ブロッカータスクに⚠️マークがあるか
- [ ] 並列実行可能タスクが明示されているか

### 4. 自己完結性テスト

計画書のみを読んで以下が特定できるか：

- [ ] 次に実行すべきタスク
- [ ] 変更対象ファイル
- [ ] 実装内容
- [ ] 検証手順

## Output Format

```
📋 引き継ぎ検証レポート

**計画書**: .claude/plan/task/[MAJOR]_plan_xxx/

## 検証結果

| 項目 | 状態 | 詳細 |
|------|------|------|
| 進捗ファイル | ✅/❌ | [詳細] |
| 現在地 | ✅/❌ | [詳細] |
| 次のタスク | ✅/❌ | [詳細] |
| ファイルパス | ✅/❌ | [詳細] |
| 実装詳細 | ✅/❌ | [詳細] |
| 検証手順 | ✅/❌ | [詳細] |
| クリティカルパス | ✅/❌/N/A | [詳細] |

## 総合判定

✅ **引き継ぎ可能**: コンテキストクリア後も作業を継続できます。
または
❌ **要修正**: 以下の項目を修正してください。
- [修正項目1]
- [修正項目2]
```

## 検証失敗時の対応

検証に失敗した場合、不足項目を特定し、修正提案を行います：

1. 不足項目をリストアップ
2. 修正例を提示
3. ユーザーの承認後に修正を実施
4. 再検証を実施

## 自動検証タイミング

以下のタイミングで自動的に検証を推奨：

1. **計画書作成完了時**: フォルダ構成作成後、ユーザー承認前
2. **チェックポイント完了時**: 進捗ファイル更新後
3. **フェーズ完了時**: 次フェーズ開始前
